<div class="container mt-3">
   <div class="row">
     <div class="col-md-10">
       <mat-expansion-panel>
         <mat-expansion-panel-header>
           <mat-panel-title>
             <b>Search and Filter Cards</b>
           </mat-panel-title>
           <mat-panel-description>
             click on panel to filter
           </mat-panel-description>
         </mat-expansion-panel-header>
         <form [formGroup]="searchForm" (ngSubmit)="submit()">
           <div class="form-group">
             <label for="search">Search Account Nick Name</label>
             <input [class.is-invalid]="
                searchForm.get('nickname')?.invalid &&
                searchForm.get('nickname')?.touched
              " id="search" class="form-control" type="text" placeholder="Account Nick Name" name="nickname"
               formControlName="nickname" />
           </div>
           <div class="form-group">
             <label for="fromAmount">Amount Range</label>
             <div class=input-group>
               <input [class.is-invalid]="
                searchForm.get('fromAmount')?.invalid &&
                searchForm.get('fromAmount')?.touched
              " id="fromAmount" class="form-control" type="number" placeholder="start" name="fromAmount"
                 formControlName="fromAmount" />
               <span class="input-group-text">-</span>
               <input [class.is-invalid]="
                searchForm.get('toAmount')?.invalid &&
                searchForm.get('toAmount')?.touched
              " id="toAmount" class="form-control" type="number" placeholder="end" name="toAmount"
                 formControlName="toAmount" />
             </div>
           </div>
           <div class="form-group">
             <label>Date Range</label>
             <div class="input-group date" id="fromDate" data-target-input="nearest">
               <input [class.is-invalid]="
                  searchForm.get('fromDate')?.invalid &&
                  searchForm.get('fromDate')?.touched
                " type="date" ng-readonly="true" class="form-control datetimepicker-input" data-target="#fromDate"
                 name="fromDate" formControlName="fromDate" min="1900-01-01"
                 max="{{ currentDate | date: 'yyyy-MM-dd' }}" />
               <span class="input-group-text">to</span>
               <input [class.is-invalid]="
                  searchForm.get('fromDate')?.invalid &&
                  searchForm.get('fromDate')?.touched
                " type="date" ng-readonly="true" class="form-control datetimepicker-input" data-target="#toDate"
                 name="toDate" formControlName="toDate" min="1900-01-01" max="{{ currentDate | date: 'yyyy-MM-dd' }}" />
             </div>
           </div>
           <div class="form-group row">
             <div class="col-md-6">
               <label>Account Status</label>
               <select name="status" id="status" class="form-control select2" formControlName="status">
                 <option selected="selected" [ngValue]="null">
                   Select Account Status
                 </option>
                 <option [ngValue]="true">
                   Active
                 </option>
                 <option [ngValue]="false">
                   Disabled
                 </option>
               </select>
             </div>
           </div>


           <div class="flex-row">
             <button type="button" class="btn btn-danger" (click)="reset()">
               reset
             </button>
             <button type="button" class="btn btn-primary ml-5" [disabled]="!searchForm.valid" [type]="'submit'">
               Search
             </button>
           </div>
         </form>
       </mat-expansion-panel>
     </div>
     <div class="col-md-2">
       <div class="me-2" id="new-account-button">
         <button disabled type="submit" class="btn btn-success" routerLink="/">
           + New Card
         </button>
       </div>
     </div>
   </div>
<div class="mt-3">
  <div class="mat-elevation-z8">
    <mat-table [dataSource]="dataSource" matSort>
      <!-- Position Column -->
      <ng-container matColumnDef="swipe">
        <mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          (click)="setSort('swipe')"
        >
          Card Number
        </mat-header-cell>
        <mat-cell *matCellDef="let card"> {{ card.swipe }} </mat-cell>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="nickName">
        <mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          (click)="setSort('nickName')"
        >
          Card Nickname
        </mat-header-cell>
        <mat-cell *matCellDef="let card"> {{ card.nickName }} </mat-cell>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="users">
        <mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          (click)="setSort('users')"
        >
          Primary User
        </mat-header-cell>
        <mat-cell *matCellDef="let card">
          {{ card.users[0].firstName + " " + card.users[0].lastName }}
        </mat-cell>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="balance">
        <mat-header-cell
          *matHeaderCellDef
          mat-sort-header
          (click)="setSort('balance')"
        >
          Current Outstanding Balance
        </mat-header-cell>
        <mat-cell *matCellDef="let card"> {{ card.balance }} </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
    </mat-table>

    <mat-paginator
      #paginator
      [length]="totalElements"
      showFirstLastButtons
      [pageIndex]="pageNumber"
      [pageSize]="pageSize"
      [pageSizeOptions]="[5, 10, 25, 100]"
      (page)="pageEvent = getCardsPageEvent($event)"
    >
    </mat-paginator>
  </div>
</div>
