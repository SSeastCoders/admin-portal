<div class="mt-3">
  <div class="mb-3">
    <mat-expansion-panel>
      <mat-expansion-panel-header>
        <mat-panel-title>
          <b>Search and Filter transactions</b>
        </mat-panel-title>
        <mat-panel-description>
          click on panel to filter
        </mat-panel-description>
      </mat-expansion-panel-header>
      <form [formGroup]="searchForm" (ngSubmit)="submit()">
        <div class="form-group">
          <label for="search">Search Description</label>
          <input [class.is-invalid]="
                searchForm.get('search')?.invalid &&
                searchForm.get('search')?.touched
              " id="search" class="form-control" type="text" placeholder="Search" name="search"
            formControlName="search" />
        </div>
        <div class="form-group">
          <label for="fromAmount">From Amount</label>
          <input [class.is-invalid]="
                searchForm.get('fromAmount')?.invalid &&
                searchForm.get('fromAmount')?.touched
              " id="fromAmount" class="form-control" type="number" placeholder="amount" name="fromAmount"
            formControlName="fromAmount" />
        </div>
        <div class="form-group">
          <label for="toAmount">To Amount</label>
          <input [class.is-invalid]="
                searchForm.get('toAmount')?.invalid &&
                searchForm.get('toAmount')?.touched
              " id="toAmount" class="form-control" type="number" placeholder="amount" name="toAmount"
            formControlName="toAmount" />
        </div>
         <div class="form-group">
           <label>From Date</label>
           <div class="input-group date" id="fromDate" data-target-input="nearest">
             <input [class.is-invalid]="
                  searchForm.get('fromDate')?.invalid &&
                  searchForm.get('fromDate')?.touched
                " type="date" ng-readonly="true" class="form-control datetimepicker-input" data-target="#fromDate"
               name="fromDate" formControlName="fromDate" min="1900-01-01" max="{{ currentDate | date: 'yyyy-MM-dd' }}" />
           </div>
         </div>
          <div class="form-group">
            <label>To Date</label>
            <div class="input-group date" id="toDate" data-target-input="nearest">
              <input [class.is-invalid]="
                  searchForm.get('fromDate')?.invalid &&
                  searchForm.get('fromDate')?.touched
                " type="date" ng-readonly="true" class="form-control datetimepicker-input" data-target="#toDate"
                name="toDate" formControlName="toDate" min="1900-01-01"
                max="{{ currentDate | date: 'yyyy-MM-dd' }}" />
            </div>
          </div>
          <div class="flex-row">
            <button type="button" class="btn btn-danger" (click)="reset()">
              reset
            </button>
           <button type="button" class="btn btn-primary ml-5" [disabled]="!searchForm.valid" [type]="'submit'">
             Search
           </button>
           </div>
      </form>
    </mat-expansion-panel>
  </div>
  <div class="mat-elevation-z8">
    <mat-table [dataSource]="dataSource">
      <ng-container matColumnDef="date">
        <mat-header-cell *matHeaderCellDef>
          Date
        </mat-header-cell>
        <mat-cell *matCellDef="let transaction">
          {{ transaction.date }}
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="description">
        <mat-header-cell *matHeaderCellDef>
          Description
        </mat-header-cell>
        <mat-cell *matCellDef="let transaction">
          {{ transaction.description }}
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="amount">
        <mat-header-cell *matHeaderCellDef>
          Amount
        </mat-header-cell>
        <mat-cell *matCellDef="let transaction">
          {{ transaction.amount }}
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="type">
        <mat-header-cell *matHeaderCellDef>
          Transaction Type
        </mat-header-cell>
        <mat-cell *matCellDef="let transaction">
          {{ transaction.nameType()}}
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="succeeded">
        <mat-header-cell *matHeaderCellDef>
          Succeeded
        </mat-header-cell>
        <mat-cell *matCellDef="let transaction">
          {{ transaction.succeeded }}
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
    </mat-table>

    <mat-paginator #paginator showFirstLastButtons [length]="totalElements" [pageIndex]="pageNumber"
      [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 25, 100]" (page)="pageEvent = getTransactionPageEvent($event)">
    </mat-paginator>
  </div>
</div>
