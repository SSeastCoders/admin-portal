
<div class="card">
  <div class="card-body">
    <div class="card card-primary">
      <form [formGroup]="accountForm" (ngSubmit)="submit()">
        <div class="card-body">
          <div class="form-group" data-select2-id="29">
            <label>Account Type</label>
            <select
              id="accountType"
              class="form-control select2 select2-hidden-accessible"
              style="width: 100%"
              data-select2-id="1"
              tabindex="-1"
              aria-hidden="true"
              name="accountType"
              (change)="changeType($event)"
              formControlName="accountType"
            >
              <option selected="selected" data-select2-id="3" disabled>
                Select Account Type
              </option>
              <option *ngFor="let account of accounts" [ngValue]="account">
                {{ account }}
              </option>
            </select>
            <small
              *ngIf="accountType?.errors && accountType.touched"
              class="text-danger"
              >Account type is required</small
            >
          </div>

          <div class="form-group">
            <label for="firstName">Account Nickname</label>
            <input
              [class.is-invalid]="
                accountForm.get('nickName')?.invalid &&
                accountForm.get('nickName')?.touched
              "
              id="nickName"
              class="form-control"
              type="text"
              placeholder="Account nickName"
              name="nickName"
              formControlName="nickName"
            />
            <small
              *ngIf="nickName?.errors && nickName.touched"
              class="text-danger"
              >Nickname needs to be 4-20 alphanumeric characters</small
            >
          </div>
        </div>

        <div class="form-group">
          <small *ngIf="acctService.creationError" class="text-danger">
            Please verify User account numbers</small
          >
          <label for="users">Add Users</label>

          <br />
          <button
            type="button"
            class="btn btn-primary btn-sm"
            (click)="searchUsers()"
          >
            Find Users
          </button>

          <ul class="list-group list-group-flush">
            <div *ngIf="userSearch?.length == 0">No users found</div>

          </ul>

          <br />
          <section *ngFor="let user of usersOnAccount; let i = index">
            <div *ngIf="i < 5">
              <li class="list-group-item">
                {{ user.firstName }} {{ user.lastName }} - {{ user.username }} -
                {{ user.email }} - {{ user.id }}
                <span class="pull-right"
                  ><i
                    center="right"
                    class="fa fa-minus"
                    (click)="removeUserNew(i)"
                  ></i
                ></span>
              </li>
            </div>
          </section>

        </div>
        <div class="input-group-append">
          <span class="input-group-text">Upload</span>
        </div>

        <div class="card-footer">
          <button
            type="button"
            class="btn btn-primary"
            [disabled]="usersOnAccount.length < 1 || !accountForm.valid"
            [type]="'submit'"
          >
            New Account
          </button>
        </div>

      </form>
    </div>

    <div class="left">
      <router-outlet></router-outlet>
      <br />
      <br />
      <a routerLink="/accounts">View all accounts</a>
    </div>
  </div>
</div>
