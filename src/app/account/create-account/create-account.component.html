<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
  </head>

  <div class="card">
    <div class="card-body">
      <div class="card card-primary">
          <form [formGroup]="accountForm" (ngSubmit)="submit()">
            <div class="card-body">
              <div class="form-group" data-select2-id="29">
                  <label>Account Type</label>
                  <select id="accountType" class="form-control select2 select2-hidden-accessible"
                  style="width: 100%;" data-select2-id="1" tabindex="-1" aria-hidden="true" name="accountType"
                  (change)="changeType($event)" formControlName="accountType">
                    <option selected="selected" data-select2-id="3" disabled>Select Account Type</option>
                    <option *ngFor="let account of accounts" [ngValue]=account>
                      {{ account }} </option>
                  </select>
                  <small *ngIf="accountType?.errors && accountType.touched" class="text-danger">Account type is required</small>
              </div>

              <div class="form-group">
                <label for="firstName">Account Nickname</label>
                <input [class.is-invalid] = "accountForm.get('nickname')?.invalid && accountForm.get('nickname')?.touched"
                id="nickname" class="form-control" type="text"
                placeholder="Account nickname" name="nickname" formControlName = "nickname">
                <small *ngIf="nickname?.errors && nickname.touched" class="text-danger">Nickname needs to be 4-20 alphanumeric characters</small>
            </div>

              <div class="form-group">
                <small *ngIf="(acctService.creationError)" class="text-danger">
                  Please verify User account numbers</small>
                  <label for="users">User on Account</label>
                  <small *ngIf="accountForm.get('users')?.invalid && accountForm.get('users')?.touched" class="text-danger">All users must be listed as ID number</small>
                  <span float="right"><i center="right" class ='fa fa-plus' (click)="addUser()"></i></span>
                  <div class="input-group" formArrayName="users">
                  <section *ngFor="let user of users().controls; let i = index;" [formGroupName]="i">
                    <button type="button" class="btn btn-danger btn-sm" (click)="removeUser(i)">Remove User</button>
                    <input [class.is-invalid] = "accountForm.get('users')?.invalid && accountForm.get('users')?.touched"
                    id="user" class="form-control" type="text" pattern="^[0-9]{1,15}$"
                    placeholder="Users on Account" name="user_{{i}}" formControlName="user">
                  </section>
                  </div>
              </div>

              <div class="form-group">
                <label for="exampleInputFile">File input</label>
                <div class="input-group">
                  <div class="custom-file">
                    <input type="file" class="custom-file-input" id="exampleInputFile">
                    <label class="custom-file-label" for="exampleInputFile">Choose file</label>
                  </div>
                  <div class="input-group-append">
                    <span class="input-group-text">Upload</span>
                  </div>
                </div>
              </div>

            <!-- /.card-body -->
          </div>

        <div class="card-footer">

          <button type="button" class="btn btn-primary" [disabled]="!accountForm.valid" [type]="'submit'">New Account</button>

        </div>

      </form>

</div>

