<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">  
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/4.3.1/cerulean/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css">
    <!-- daterange picker -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js">
    <!-- bootstrap datepicker -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js">    
    <!-- Theme style -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/2.4.12/js/adminlte.min.js">
    <!-- AdminLTE Skins. Choose a skin from the css/skins-->

    <!--link src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet">
    <link src="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet"-->
  </head>

  <div class="card card-outline card-primary">
    <div class="card-header text-center">
        <a [routerLink]="['/']" class="h1"><b>New User</b></a>
    </div>
    <div class="card-body">

<form #createUserForm="ngForm" [formGroup]="form" >

    <div class="input-group mb-3">

    <div class="form-group">
        <label for="role">Role Title:</label>
        
        <select [class.is-invalid] = "form.get('role').invalid && form.get('role').touched"
        id="role" class="form-control"
        placeholder="Select Role Title" name="role" formControlName = "role">
        <option [ngValue]="null" disabled>Select Role Title</option>
        <option *ngFor="let role of allRoles" [ngValue]="role">
         {{ role.roleTitle }}
        </option>
      </select> 
    </div>

    <div class="form-group">
        <label for="firstName">First Name:</label>
        <input [class.is-invalid] = "form.get('firstName').invalid && form.get('firstName').touched"
        id="firstName" class="form-control" type="text"
        placeholder="First Name" name="firstName" formControlName = "firstName">
    </div>

    <div class="form-group">
        <label for="lastName">Last Name:</label>
        <input [class.is-invalid] = "form.get('lastName').invalid && form.get('lastName').touched" 
        id="lastName" class="form-control" type="text"
        placeholder="Last Name" name="lastName" formControlName = "lastName">
    </div> 

    <div class="form-group">
        <label for="dob">Date of Birth:</label>
        <input id="dob" class="form-control" type="date"
        name="dob" formControlName = "dob"
        min="1900-01-01" max="{{minorCutOff | date:'yyyy-MM-dd'}}">
    </div>

    <div class="form-group">
        <label for="email">*Email:</label>
        <input [class.is-invalid] = "form.get('email').invalid && form.get('email').touched"
        id="email" class="form-control" type="email"
        placeholder="Email" name="email" formControlName="email"
        >

        <div *ngIf="(email.invalid && email.touched) || email.dirty">
            <small *ngIf="email.errors?.required" class="text-danger">Email is required</small>
            <!--question mark(?) is a safe navigation operator-->
            <small *ngIf="email.errors?.email" class="text-danger">Invalid email address</small>
        </div>

    </div>

    <div class="form-group">
        <label for="phone">Phone Number:</label>
        <div class="input-group">
        <div class="input-group-prepend">
            <span class="input-group-text"><i class="fa fa-phone"></i></span>
        </div>
        <input type= "text" id="phone" class="form-control" phoneMask 
        [preValue]="form.value.phone"  [phoneControl]="form.controls['phone']"
        formControlName="phone" formControlName="phone" maxlength="14" 
        placeholder="(000) 000-0000" name="phone" >
        </div>
        <small *ngIf="phone.errors?.pattern" class="text-danger">Please enter a valid phone number</small>
    </div>

    <div class="form-group">
        <label for="username">*Username:</label>
        <input [class.is-invalid] = "form.get('username').invalid && form.get('username').touched"
        id="username" class="form-control" type="text"
        placeholder="Username" name="username" formControlName="username">

        <div *ngIf="(username.invalid && username.touched) || username.dirty">
            <!--small *ngIf="form.controls['username'].errors?.usernameExists" class="text-danger">Username is taken</small--> 
            <small *ngIf="username.errors?.required" class="text-danger">Username is required</small>
            <!--question mark(?) is a safe navigation operator-->
            <small *ngIf="username.errors?.pattern" class="text-danger">Username can have only alphanumeric characters</small>
            <small *ngIf="username.errors?.minlength || username.errors?.maxlength" class="text-danger">
                Username must be more that 4 characters, and contain no more than 20 characters</small>
        </div>

    </div>

    <div class="form-group">
        <label for="password">*Password:</label>
        <input [class.is-invalid] = "form.get('password').invalid && form.get('password').touched" 
        id="password" class="form-control" type="password"
        placeholder="Password" name="password" formControlName="password" >
        <!--[(ngModel)]="user.password" #password="ngModel"-->

        <div class="input-group-append">
            <div class="input-group-text">
          <i (click) = "togglePass()" class="{{show ? 'fa fa-eye' : 'fa fa-eye-slash'}}" id="togglePassword"></i>
        </div>
        
        <div *ngIf="(password.invalid && password.touched) || password.dirty">
            <small *ngIf="password.errors?.required" class="text-danger">Password is required</small>
            <!--question mark(?) is a safe navigation operator-->
            <small *ngIf="(password.errors?.minlength) || (password.errors?.maxlength) || (password.errors?.pattern)" class="text-danger">
                Password must contain a number, uppercase and be 7-20 characters long</small>
        </div>

    </div> 

<!--/form-->

<button class="btn btn-warning"
    (click)="createUser()"
    [disabled]="!createUserForm.form.valid">
    <span class="ml-1">Make New User</span>
</button>


    <!--div class="form-group">
        <label for="dateJoined">Date Joined:</label>
        <input id="dateJoined" class="form-control" type="text"
        placeholder="Date Joined" name="dateJoined"
        [(ngModel)]="user.dateJoined" #dateJoined="ngModel">
    </div-->

        <!--div class="form-group">
        <label for="activeStatus">Active Status:</label>
        <input id="activeStatus" class="form-control" type="text"
        placeholder="Active Status" name="activeStatus" required
        [(ngModel)]="user.activeStatus" #activeStatus="ngModel">
    </div-->


    <div class="card card-primary">
        <div class="card-header">
          <h3 class="card-title">New User</h3>
        </div>
        <!-- /.card-header -->
        <!-- form start -->
        <form #createUserForm="ngForm" [formGroup]="form" >
          <div class="card-body">

            <div class="form-group">
                <label for="firstName">First Name</label>
                <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Enter email">
            </div>

            <div class="form-group" data-select2-id="29">
                <label>Role Title</label>
                <select id="role" class="form-control select2 select2-hidden-accessible" style="width: 100%;" data-select2-id="1" tabindex="-1" aria-hidden="true" name="role">
                  <option selected="selected" data-select2-id="3" disabled>Select Role Title</option>
                  <option *ngFor="let role of allRoles" [ngValue]="role">
                    {{ role.roleTitle }} </option>
                </select>
            </div>

            <div class="form-group">
                <label for="firstName">First Name</label>
                <input [class.is-invalid] = "form.get('firstName').invalid && form.get('firstName').touched"
                id="firstName" class="form-control" type="text"
                placeholder="First Name" name="firstName" formControlName = "firstName">
            </div>

            <div class="form-group">
                <label for="firstName">Last Name</label>
                <input [class.is-invalid] = "form.get('lastName').invalid && form.get('lastName').touched"
                id="lastName" class="form-control" type="text"
                placeholder="Last Name" name="lastName" formControlName = "lastName">
            </div>

            <div class="form-group">
                <label>Date of Birth</label>
                  <div class="input-group date" id="dob" data-target-input="nearest">
                      <input type="date" class="form-control datetimepicker-input" data-target="#dob">
                      <div class="input-group-append" data-target="#dob" data-toggle="datetimepicker">
                          <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                      </div>
                  </div>
              </div>

              <div class="input-group date" id="reservationdate" data-target-input="nearest">
                <input type="text" class="form-control datetimepicker-input" data-target="#reservationdate">
                <div class="input-group-append" data-target="#reservationdate" data-toggle="datetimepicker">
                    <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
            </div>



            <div class="form-group">
                <label for="password">Password</label>
                <div class="input-group mb-3">
                    <input id="password" class="form-control" type="{{show ? 'text' : 'password'}}"
                        placeholder="Password" name="password" formControlName="password" />

                    <div class="input-group-append">
                        <div class="input-group-text">
                            <i (click) = "togglePass()" class="{{show ? 'fa fa-eye' : 'fa fa-eye-slash'}}" id="togglePassword"></i>
                        </div>
                    </div>
                </div>
                <div *ngIf="(password.invalid && password.touched) || password.dirty">
                    <small *ngIf="password.errors?.required" class="text-danger">Password is required</small>
                    <!--question mark(?) is a safe navigation operator-->
                    <small *ngIf="(password.errors?.minlength) || (password.errors?.maxlength) || (password.errors?.pattern)" class="text-danger">
                        Password must contain a number, uppercase and be 7-20 characters long</small>
                </div>
            </div>

            <div class="form-group">
              <label for="exampleInputFile">File input</label>
              <div class="input-group">
                <div class="custom-file">
                  <input type="file" class="custom-file-input" id="exampleInputFile">
                  <label class="custom-file-label" for="exampleInputFile">Choose file</label>
                </div>
                <div class="input-group-append">
                  <span class="input-group-text">Upload</span>
                </div>
              </div>
            </div>
            <div class="form-check">
              <input type="checkbox" class="form-check-input" id="exampleCheck1">
              <label class="form-check-label" for="exampleCheck1">Check me out</label>
            </div>
          </div>
          <!-- /.card-body -->

          <div class="card-footer">
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </form>

      </div>

